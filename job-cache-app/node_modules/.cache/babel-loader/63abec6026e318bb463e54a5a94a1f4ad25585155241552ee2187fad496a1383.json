{"ast":null,"code":"var _jsxFileName = \"/Users/mg/Documents/documentsStorage/coding/personal/jobcache/client/job-cache-app/src/components/Motivation/Opportunity.jsx\",\n  _s = $RefreshSig$();\nimport React from \"react\";\nimport { useState, useRef, useEffect } from \"react\";\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default function Opportunity() {\n  _s();\n  const viewedOpportunity = useRef(true);\n  const [jobOpportunity, setJobOpportunity] = useState(() => {\n    // Retrieve the job opportunity from local storage on initial render\n    const storedJobOpportunity = localStorage.getItem(\"jobOpportunity\");\n    return storedJobOpportunity ? JSON.parse(storedJobOpportunity) : null;\n  });\n  function sortResults(data) {\n    return data.filter(current => !current.role.toLowerCase().includes(\"director\") && !current.role.toLowerCase().includes(\"sales\"));\n  }\n  function randomIndex(data) {\n    return Math.floor(Math.random() * data);\n  }\n  const getJobOpportunity = async () => {\n    try {\n      const response = await fetch(\"/job/motivate\", {\n        method: \"GET\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          \"Cache-Control\": \"no-cache\",\n          \"Authorization\": \"Token f7d5d074f4ed5b3239030832fca273cc4ab78fde\",\n          \"Accept\": \"application/json\"\n        }\n      });\n      if (response.ok) {\n        const responseData = await response.json();\n        console.log(responseData.results);\n        setJobOpportunity(sortResults(responseData.results)[randomIndex(responseData.results.length)]);\n        localStorage.setItem(\"jobOpportunity\", JSON.stringify(sortResults(responseData.results)[randomIndex(responseData.results.length)]));\n        localStorage.setItem(\"lastJobOpportunityTime\", Date.now());\n      } else {\n        console.error(\"failed to retrieve job opportunity\");\n      }\n    } catch (error) {\n      console.error(\"Error:\", error);\n    }\n  };\n  useEffect(() => {\n    const lastJobOpportunityTime = localStorage.getItem('lastJobOpportunityTime');\n    const currentTime = Date.now();\n    const timeElapsed = currentTime - lastJobOpportunityTime;\n    //refreshes once a week\n    if (!viewedOpportunity.current || timeElapsed >= 1000 * 60 * 60 * 168) {\n      getJobOpportunity();\n      viewedOpportunity.current = true;\n    }\n    const intervalId = setInterval(() => {\n      getJobOpportunity();\n    }, 1000 * 60 * 60 * 168 - timeElapsed);\n    return () => {\n      clearInterval(intervalId);\n      viewedOpportunity.current = false;\n    };\n  }, []);\n  const positionTitleStyling = {\n    fontSize: \"0.9rem\",\n    margin: \"1em auto\",\n    fontWeight: \"500\"\n  };\n  const JobLinkStyling = {\n    cursor: \"pointer\",\n    color: \"inherit\",\n    textDecoration: \"underline\"\n  };\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: jobOpportunity != null ? /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n        style: positionTitleStyling,\n        children: jobOpportunity.role\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\"@\", jobOpportunity.company_name]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n        href: jobOpportunity.url,\n        target: \"_blank\",\n        rel: \"noopener noreferrer\",\n        style: JobLinkStyling,\n        children: /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"View Job Opportunity\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 25\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true) : /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"Try again later to view future Job Opportunities!\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 21\n    }, this)\n  }, void 0, false);\n}\n_s(Opportunity, \"W7hBiCTQ2L0Ejztg7VwHPmhJF98=\");\n_c = Opportunity;\nvar _c;\n$RefreshReg$(_c, \"Opportunity\");","map":{"version":3,"names":["React","useState","useRef","useEffect","jsxDEV","_jsxDEV","Fragment","_Fragment","Opportunity","_s","viewedOpportunity","jobOpportunity","setJobOpportunity","storedJobOpportunity","localStorage","getItem","JSON","parse","sortResults","data","filter","current","role","toLowerCase","includes","randomIndex","Math","floor","random","getJobOpportunity","response","fetch","method","headers","ok","responseData","json","console","log","results","length","setItem","stringify","Date","now","error","lastJobOpportunityTime","currentTime","timeElapsed","intervalId","setInterval","clearInterval","positionTitleStyling","fontSize","margin","fontWeight","JobLinkStyling","cursor","color","textDecoration","children","style","fileName","_jsxFileName","lineNumber","columnNumber","company_name","href","url","target","rel","_c","$RefreshReg$"],"sources":["/Users/mg/Documents/documentsStorage/coding/personal/jobcache/client/job-cache-app/src/components/Motivation/Opportunity.jsx"],"sourcesContent":["import React from \"react\"\nimport { useState, useRef, useEffect } from \"react\"\n\nexport default function Opportunity() {\n\n    const viewedOpportunity = useRef(true)\n    const [jobOpportunity, setJobOpportunity] = useState(() => {\n        // Retrieve the job opportunity from local storage on initial render\n        const storedJobOpportunity = localStorage.getItem(\"jobOpportunity\")\n        return storedJobOpportunity ? JSON.parse(storedJobOpportunity) : null\n    })\n\n    function sortResults(data) {\n        return data.filter(current => (\n            !current.role.toLowerCase().includes(\"director\") && \n            !current.role.toLowerCase().includes(\"sales\")\n        ))\n    }\n\n    function randomIndex(data) {\n        return Math.floor(Math.random()*data)\n    }\n\n    const getJobOpportunity = async () => {\n        try {\n            const response = await fetch(\"/job/motivate\", {\n                method: \"GET\",\n                headers: {\n                    \"Content-Type\": \"application/json\",\n                    \"Cache-Control\": \"no-cache\",\n                    \"Authorization\":\"Token f7d5d074f4ed5b3239030832fca273cc4ab78fde\",\n                    \"Accept\":\"application/json\",\n                }\n            })\n           \n            if (response.ok) {\n                const responseData = await response.json()\n                console.log(responseData.results)\n                setJobOpportunity(sortResults(responseData.results)[randomIndex(responseData.results.length)])\n                localStorage.setItem(\"jobOpportunity\", JSON.stringify(sortResults(responseData.results)[randomIndex(responseData.results.length)]))\n                localStorage.setItem(\"lastJobOpportunityTime\", Date.now())\n            } else {\n                console.error(\"failed to retrieve job opportunity\")\n            }\n        } catch (error) {\n            console.error(\"Error:\", error)\n        }\n    }\n\n    useEffect(() => {\n        const lastJobOpportunityTime = localStorage.getItem('lastJobOpportunityTime')\n        const currentTime = Date.now()\n        const timeElapsed = currentTime - lastJobOpportunityTime\n        //refreshes once a week\n        if (!viewedOpportunity.current || timeElapsed >= 1000 * 60 * 60 * 168) {\n          getJobOpportunity()\n          viewedOpportunity.current = true\n        }\n        const intervalId = setInterval(() => {\n          getJobOpportunity()\n        }, 1000 * 60 * 60 * 168 - timeElapsed)\n    \n        return () => {\n            clearInterval(intervalId)\n            viewedOpportunity.current = false\n        }\n    }, [])\n\n    const positionTitleStyling = {\n        fontSize:\"0.9rem\",\n        margin:\"1em auto\",\n        fontWeight:\"500\"\n    }\n\n    const JobLinkStyling = {\n        cursor:\"pointer\",\n        color:\"inherit\",\n        textDecoration:\"underline\"\n    }\n\n    return (\n        <>\n            {jobOpportunity!=null ? \n                (\n                    <>\n                    <h5 style={positionTitleStyling}>{jobOpportunity.role}</h5>\n                    <p>@{jobOpportunity.company_name}</p>\n                    <a \n                        href={jobOpportunity.url} \n                        target=\"_blank\" \n                        rel=\"noopener noreferrer\"\n                        style={JobLinkStyling}\n                    >\n                        <p>View Job Opportunity</p>\n                    </a>\n                    </>\n                )\n                :\n                    <p>Try again later to view future Job Opportunities!</p>\n                }\n        </>\n    )\n}\n\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}